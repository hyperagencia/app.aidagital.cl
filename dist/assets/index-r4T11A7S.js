import{j as e,S as s,U as a,c as t,l as r,a as l,f as i}from"./index-C9kX2OEc.js";import{a as n}from"./vendor-BAsl6vX1.js";import{c as o,a as c}from"./creatorsService-iD-IgDeb.js";const d=({children:s,loading:a,className:t=""})=>a?e.jsx(g,{}):e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:e.jsx("table",{className:`min-w-full divide-y divide-gray-200 ${t}`,children:s})}),m=({children:s})=>e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:s})}),x=({children:s})=>e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s}),h=({children:s,header:a,className:t=""})=>{const r=a?"th":"td",l=a?"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider":"px-4 py-4 whitespace-nowrap text-sm text-gray-900";return e.jsx(r,{className:`${l} ${t}`,children:s})},g=({rows:a=5})=>e.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow",children:e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"grid grid-cols-6 gap-4 pb-3 border-b border-gray-200",children:[...Array(6)].map((a,t)=>e.jsx(s,{width:"w-full",height:"h-4"},`header-${t}`))}),[...Array(a)].map((a,t)=>e.jsx("div",{className:"grid grid-cols-6 gap-4 py-2",children:[...Array(6)].map((a,r)=>e.jsx(s,{width:"w-full",height:"h-8"},`cell-${t}-${r}`))},`row-${t}`))]})}),u=({searchTerm:s,onSearchChange:t,placeholder:r="Buscar por nombre o email..."})=>e.jsx(a.Card,{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(a.Input,{type:"text",placeholder:r,value:s,onChange:e=>t(e.target.value),className:"pl-12 text-lg py-4"}),e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 text-xl"})]})});const p=new class{constructor(){this.baseEndpoint="/favorites.php"}async getFavorites(){try{r("Fetching user favorites");const e=await c.get(this.baseEndpoint);if(e.success)return r(`Fetched ${e.data.favorites.length} favorites`),{success:!0,favorites:e.data.favorites,total:e.data.total||e.data.favorites.length};throw new Error(e.message||t.ERRORS.UNKNOWN)}catch(e){throw l(e,"Get favorites"),new Error(e.message||t.ERRORS.NETWORK)}}async toggleFavorite(e){try{r(`Toggling favorite for creator ${e}`);const s=await c.post(this.baseEndpoint,{creator_id:e});if(s.success){const a=s.data.action,t=s.data.is_favorite;return r(`Creator ${e} ${a} ${t?"to":"from"} favorites`),{success:!0,creatorId:e,isFavorite:t,action:a,message:s.message}}throw new Error(s.message||t.ERRORS.UNKNOWN)}catch(s){throw l(s,`Toggle favorite for creator ${e}`),new Error(s.message||t.ERRORS.NETWORK)}}async removeFavorite(e){try{r(`Removing favorite for creator ${e}`);const s=await c.delete(`${this.baseEndpoint}?creator_id=${e}`);if(s.success)return r(`Creator ${e} removed from favorites`),{success:!0,creatorId:e,isFavorite:!1,message:s.message};throw new Error(s.message||t.ERRORS.UNKNOWN)}catch(s){throw l(s,`Remove favorite for creator ${e}`),new Error(s.message||t.ERRORS.NETWORK)}}async addFavorite(e){return await this.toggleFavorite(e)}async isFavorite(e){try{const s=await this.getFavorites();return!!s.success&&s.favorites.some(s=>s.id===e)}catch(s){return l(s,`Check if creator ${e} is favorite`),!1}}},f=()=>{const[e,s]=n.useState(!1),[a,t]=n.useState(null);return{loading:e,error:a,toggleFavorite:n.useCallback(async(e,a=!1)=>{try{s(!0),t(null);const a=await p.toggleFavorite(e);if(a.success)return r(`Favorite toggled: Creator ${e} is now ${a.isFavorite?"favorited":"unfavorited"}`),{success:!0,creatorId:a.creatorId,isFavorite:a.isFavorite,action:a.action,message:a.message};throw new Error("Failed to toggle favorite")}catch(i){const s=i.message||"Error al cambiar favorito";return t(s),l(i,`Toggle favorite for creator ${e}`),{success:!1,error:s}}finally{s(!1)}},[]),addToFavorites:n.useCallback(async e=>{try{s(!0),t(null);const a=await p.addFavorite(e);if(a.success)return r(`Creator ${e} added to favorites`),{success:!0,creatorId:a.creatorId,isFavorite:!0,message:a.message};throw new Error("Failed to add to favorites")}catch(a){const s=a.message||"Error al agregar a favoritos";return t(s),l(a,`Add to favorites creator ${e}`),{success:!1,error:s}}finally{s(!1)}},[]),removeFromFavorites:n.useCallback(async e=>{try{s(!0),t(null);const a=await p.removeFavorite(e);if(a.success)return r(`Creator ${e} removed from favorites`),{success:!0,creatorId:a.creatorId,isFavorite:!1,message:a.message};throw new Error("Failed to remove from favorites")}catch(a){const s=a.message||"Error al quitar de favoritos";return t(s),l(a,`Remove from favorites creator ${e}`),{success:!1,error:s}}finally{s(!1)}},[]),clearError:n.useCallback(()=>{t(null)},[])}},j=({filters:s})=>{const{selectedInterests:t,selectedPlatforms:l,ageRange:c,selectedNationality:d,selectedLocation:m,selectedModality:x,handleInterestToggle:h,handlePlatformToggle:g,setAgeRange:u,setSelectedNationality:p,setSelectedLocation:f,setSelectedModality:j,clearFilters:v,filterOptions:N,totalCreators:y,filteredCount:b,hasActiveFilters:w}=s,{exporting:C,exportCreators:k}=(()=>{const[e,s]=n.useState(!1),[a,t]=n.useState(null);return{exporting:e,exportError:a,exportCreators:n.useCallback(async(e={},a="csv")=>{try{s(!0),t(null);const l=await o.exportCreators(e,a);if(l.success){if(l.downloadUrl)window.open(l.downloadUrl,"_blank");else if(l.data){const e=new Blob([l.data],{type:"csv"===a?"text/csv":"application/json"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download=l.filename||`creators.${a}`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)}return r("Export completed successfully"),{success:!0}}}catch(l){return t(l.message),{success:!1,message:l.message}}finally{s(!1)}},[])}})();return e.jsxs(a.Card,{className:"mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Intereses"}),e.jsxs(a.Select,{value:"",onChange:e=>{e.target.value&&h(e.target.value)},children:[e.jsx("option",{value:"",children:t.length>0?`${t.length} seleccionados`:"Seleccionar intereses..."}),N.interests.map(s=>e.jsx("option",{value:s,disabled:t.includes(s),children:i.formatInterests([s])},s))]}),t.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:t.map(s=>e.jsxs(a.Badge,{variant:"purple",size:"sm",className:"cursor-pointer",onClick:()=>h(s),children:[i.formatInterests([s]).substring(0,15),e.jsx("span",{className:"ml-1",children:"Ã—"})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plataformas"}),e.jsxs(a.Select,{value:"",onChange:e=>{e.target.value&&g(e.target.value)},children:[e.jsx("option",{value:"",children:l.length>0?`${l.length} seleccionadas`:"Seleccionar plataformas..."}),N.platforms.map(s=>e.jsx("option",{value:s,disabled:l.includes(s),children:i.formatPlatform(s)},s))]}),l.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:l.map(s=>e.jsxs(a.Badge,{variant:"blue",size:"sm",className:"cursor-pointer",onClick:()=>g(s),children:[i.formatPlatform(s),e.jsx("span",{className:"ml-1",children:"Ã—"})]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rango de edad"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a.Input,{type:"number",placeholder:"Min",value:c.min,onChange:e=>u(s=>({...s,min:e.target.value})),min:"18",max:"80"}),e.jsx(a.Input,{type:"number",placeholder:"Max",value:c.max,onChange:e=>u(s=>({...s,max:e.target.value})),min:"18",max:"80"})]})]}),e.jsxs(a.Select,{label:"Nacionalidad",value:d,onChange:e=>p(e.target.value),children:[e.jsx("option",{value:"",children:"Todas las nacionalidades"}),N.nationalities.map(s=>e.jsx("option",{value:s,children:i.formatNationality(s)},s))]}),e.jsxs(a.Select,{label:"UbicaciÃ³n",value:m,onChange:e=>f(e.target.value),children:[e.jsx("option",{value:"",children:"Todas las ubicaciones"}),N.locations.map(s=>e.jsx("option",{value:s,children:i.formatLocation(s)},s))]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Mostrando ",b," de ",y," creators"]}),w&&e.jsx(a.Badge,{variant:"purple",children:"Filtrado"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[w&&e.jsx(a.Button,{variant:"secondary",size:"sm",onClick:v,children:"Limpiar filtros"}),e.jsx(a.Button,{variant:"primary",size:"sm",onClick:async()=>{const e={interests:t,platforms:l,ageMin:c.min,ageMax:c.max,nationality:d,location:m,modality:x};await k(e,"csv")},loading:C,children:"Exportar"})]})]})]})},v=({creator:s,onEdit:t,onDelete:r,onAssignBrand:l,onFavoriteChange:o})=>{const[c,d]=n.useState(!1),[m,x]=n.useState(s.is_favorite||!1),{toggleFavorite:h,loading:g}=f();return e.jsxs(a.Card,{hover:!0,className:"transition-all duration-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[e.jsx(a.Avatar,{name:s.full_name,size:"lg"}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.full_name}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[s.age?`${s.age} aÃ±os`:"Edad no especificada",", ",i.formatNationality(s.nationality)]})]}),e.jsx("button",{onClick:async()=>{const e=await h(s.id,m);e.success&&(x(e.isFavorite),null==o||o(s.id,e.isFavorite))},disabled:g,className:`ml-2 p-2 rounded-full transition-colors ${m?"text-red-500 hover:text-red-600 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"} ${g?"opacity-50 cursor-not-allowed":""}`,title:m?"Quitar de favoritos":"Agregar a favoritos",children:g?e.jsx(a.Spinner,{size:"sm"}):e.jsx("span",{className:"text-xl",children:m?"â¤ï¸":"ðŸ¤"})})]})})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Contacto"}),e.jsx("p",{className:"text-gray-600",children:s.email}),e.jsx("p",{className:"text-gray-600",children:i.formatPhone(s.phone)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Intereses"}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:i.formatInterests(s.interests)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Plataformas"}),s.social_networks&&s.social_networks.length>0?e.jsx("div",{className:"space-y-2",children:s.social_networks.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:i.formatPlatform(s.platform)}),s.profile_link?e.jsx("a",{href:s.profile_link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-700 text-sm font-medium",children:"Ver"}):e.jsx("span",{className:"text-gray-400 text-sm",children:"Sin enlace"})]},`${s.platform}-${a}`))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Sin plataformas registradas"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Acciones"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a.Button,{variant:"secondary",size:"sm",className:"w-full",onClick:()=>null==t?void 0:t(s),children:"Editar"}),e.jsx(a.Button,{variant:"ghost",size:"sm",className:"w-full",onClick:()=>null==l?void 0:l(s),children:"Asignar Marca"}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 text-sm w-full text-right",onClick:()=>d(!c),children:c?"â–² Menos":"â–¼ MÃ¡s"})]})]})]}),c&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"UbicaciÃ³n"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:i.formatLocation(s.location)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Modalidad"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:i.formatModality(s.modality)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Registrado"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:i.formatTimeAgo(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 text-sm",children:"Estado"}),e.jsx(a.Badge,{variant:"green",size:"sm",className:"mt-1",children:"Activo"})]})]})]})},N=({hasFilters:s,onClearFilters:t})=>e.jsxs(a.Card,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:s?"ðŸ”":"ðŸ‘¥"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s?"No se encontraron creators":"No hay creators registrados"}),e.jsx("p",{className:"text-gray-600 mb-6",children:s?"Intenta ajustar los filtros o la bÃºsqueda":"Los creators que se registren aparecerÃ¡n aquÃ­"}),s&&e.jsx(a.Button,{variant:"primary",onClick:t,children:"Limpiar todos los filtros"})]}),y=({creators:s,loading:t,loadingMore:r,error:l,hasMore:i,onRefresh:n,onLoadMore:o,onFavoriteChange:c})=>t?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsx(a.Card,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(a.Skeleton,{width:"w-12",height:"h-12",className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(a.Skeleton,{width:"w-32",height:"h-5",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-24",height:"h-4"})]})]}),e.jsxs("div",{children:[e.jsx(a.Skeleton,{width:"w-20",height:"h-4",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-full",height:"h-4"})]}),e.jsxs("div",{children:[e.jsx(a.Skeleton,{width:"w-24",height:"h-4",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-full",height:"h-4"})]}),e.jsxs("div",{children:[e.jsx(a.Skeleton,{width:"w-20",height:"h-4",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-full",height:"h-8"})]})]})},t))}):l?e.jsxs(a.Card,{className:"p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âš ï¸"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error al cargar creators"}),e.jsx("p",{className:"text-gray-600 mb-4",children:l}),e.jsx(a.Button,{variant:"primary",onClick:n,children:"Reintentar"})]}):e.jsxs("div",{className:"space-y-4",children:[s.map(s=>e.jsx(v,{creator:s,onEdit:e=>{},onDelete:e=>{},onAssignBrand:e=>{},onFavoriteChange:c},s.id)),r&&e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((s,t)=>e.jsx(a.Card,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(a.Skeleton,{width:"w-12",height:"h-12",className:"rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(a.Skeleton,{width:"w-32",height:"h-5",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-24",height:"h-4"})]})]}),e.jsxs("div",{children:[e.jsx(a.Skeleton,{width:"w-20",height:"h-4",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-full",height:"h-4"})]}),e.jsxs("div",{children:[e.jsx(a.Skeleton,{width:"w-24",height:"h-4",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-full",height:"h-4"})]}),e.jsxs("div",{children:[e.jsx(a.Skeleton,{width:"w-20",height:"h-4",className:"mb-2"}),e.jsx(a.Skeleton,{width:"w-full",height:"h-8"})]})]})},`loading-${t}`))}),i&&!r&&e.jsx("div",{className:"flex justify-center pt-6",children:e.jsx(a.Button,{variant:"secondary",size:"lg",onClick:o,className:"px-8 py-3",children:"Cargar mÃ¡s creators"})}),!i&&s.length>0&&e.jsx("div",{className:"text-center py-6",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Has visto todos los creators disponibles (",s.length," total)"]})})]}),b=({creator:s,onViewDetails:t,onFavoriteChange:r})=>{var l;const[o,c]=n.useState(s.is_favorite||!1),{toggleFavorite:d,loading:m}=f(),x={instagram:"ðŸ“·",tiktok:"ðŸŽµ",youtube:"ðŸŽ¥",facebook:"ðŸ‘¥",twitter:"ð•"};return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx(h,{children:e.jsx(a.Avatar,{name:s.full_name,size:"md"})}),e.jsxs(h,{children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.full_name}),e.jsx("div",{className:"text-xs text-gray-500",children:i.formatNationality(s.nationality)})]}),e.jsx(h,{children:s.age?`${s.age} aÃ±os`:"-"}),e.jsx(h,{children:e.jsx("button",{onClick:async()=>{const e=await d(s.id,o);e.success&&(c(e.isFavorite),null==r||r(s.id,e.isFavorite))},disabled:m,className:`p-2 rounded-full transition-colors ${o?"text-red-500 hover:text-red-600 bg-red-50":"text-gray-400 hover:text-red-500 hover:bg-red-50"} ${m?"opacity-50 cursor-not-allowed":""}`,title:o?"Quitar de favoritos":"Agregar a favoritos",children:m?e.jsx(a.Spinner,{size:"sm"}):e.jsx("span",{className:"text-xl",children:o?"â¤ï¸":"ðŸ¤"})})}),e.jsx(h,{children:e.jsx("div",{className:"flex gap-2",children:(null==(l=s.social_networks)?void 0:l.length)>0?s.social_networks.map((s,a)=>s.profile_link?e.jsx("a",{href:s.profile_link,target:"_blank",rel:"noopener noreferrer",className:"text-xl hover:scale-110 transition-transform",title:i.formatPlatform(s.platform),onClick:e=>e.stopPropagation(),children:x[s.platform]||"ðŸ”—"},`${s.platform}-${a}`):null):e.jsx("span",{className:"text-gray-400 text-sm",children:"-"})})}),e.jsx(h,{children:e.jsx(a.Button,{variant:"ghost",size:"sm",onClick:()=>t(s),children:"Ver mÃ¡s"})})]})},w=({creator:s,isOpen:t,onClose:r})=>s?e.jsx(a.Modal,{isOpen:t,onClose:r,title:s.full_name,size:"lg",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 text-sm uppercase tracking-wide",children:"InformaciÃ³n Personal"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"font-medium text-gray-700 w-28",children:"Edad:"}),e.jsx("span",{className:"text-gray-600",children:s.age?`${s.age} aÃ±os`:"No especificada"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"font-medium text-gray-700 w-28",children:"Nacionalidad:"}),e.jsx("span",{className:"text-gray-600",children:i.formatNationality(s.nationality)})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"font-medium text-gray-700 w-28",children:"UbicaciÃ³n:"}),e.jsx("span",{className:"text-gray-600",children:i.formatLocation(s.location)})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"font-medium text-gray-700 w-28",children:"Modalidad:"}),e.jsx("span",{className:"text-gray-600",children:i.formatModality(s.modality)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 text-sm uppercase tracking-wide",children:"Contacto"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"font-medium text-gray-700 w-20",children:"Email:"}),e.jsx("a",{href:`mailto:${s.email}`,className:"text-purple-600 hover:underline break-all",children:s.email})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"font-medium text-gray-700 w-20",children:"TelÃ©fono:"}),e.jsx("a",{href:`tel:${s.phone}`,className:"text-purple-600 hover:underline",children:i.formatPhone(s.phone)})]})]})]})]}),e.jsx(a.Divider,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 text-sm uppercase tracking-wide",children:"Intereses"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:i.formatInterests(s.interests)})]}),e.jsx(a.Divider,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 text-sm uppercase tracking-wide",children:"Plataformas y Redes Sociales"}),s.social_networks&&s.social_networks.length>0?e.jsx("div",{className:"space-y-2",children:s.social_networks.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between text-sm py-2 px-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-gray-700",children:i.formatPlatform(s.platform)}),s.profile_link?e.jsxs("a",{href:s.profile_link,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800 font-medium flex items-center gap-1",children:["Ver perfil ",e.jsx("span",{className:"text-xs",children:"â†—"})]}):e.jsx("span",{className:"text-gray-400 text-xs",children:"Sin enlace"})]},a))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Sin plataformas registradas"})]}),e.jsx(a.Divider,{}),e.jsx("div",{className:"pt-2",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Registrado"}),e.jsx("p",{className:"text-gray-600",children:i.formatTimeAgo(s.created_at)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.formatDate(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 block mb-1",children:"Estado"}),e.jsx(a.Badge,{variant:"green",size:"sm",children:"Activo"})]})]})}),e.jsx(a.Divider,{}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(a.Button,{variant:"primary",size:"md",className:"flex-1",onClick:()=>{},children:"âœï¸ Editar Creator"}),e.jsx(a.Button,{variant:"secondary",size:"md",className:"flex-1",onClick:()=>{},children:"ðŸ·ï¸ Asignar Marca"})]})]})}):null,C=({creators:s,loading:t,loadingMore:r,error:l,hasMore:i,onRefresh:o,onLoadMore:c,onFavoriteChange:u})=>{const[p,f]=n.useState(null);return t?e.jsx(g,{rows:10}):l?e.jsxs(a.Card,{className:"p-8 text-center",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âš ï¸"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error al cargar creators"}),e.jsx("p",{className:"text-gray-600 mb-4",children:l}),e.jsx(a.Button,{variant:"primary",onClick:o,children:"Reintentar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsxs(m,{children:[e.jsx(h,{header:!0,children:"Avatar"}),e.jsx(h,{header:!0,children:"Nombre"}),e.jsx(h,{header:!0,children:"Edad"}),e.jsx(h,{header:!0,children:"Favorito"}),e.jsx(h,{header:!0,children:"Redes Sociales"}),e.jsx(h,{header:!0,children:"Acciones"})]}),e.jsx(x,{children:s.map(s=>e.jsx(b,{creator:s,onViewDetails:f,onFavoriteChange:u},s.id))})]}),r&&e.jsx("div",{className:"mt-4",children:e.jsx(g,{rows:5})}),i&&!r&&e.jsx("div",{className:"flex justify-center pt-6",children:e.jsx(a.Button,{variant:"secondary",size:"lg",onClick:c,className:"px-8 py-3",children:"Cargar mÃ¡s creators"})}),!i&&s.length>0&&e.jsx("div",{className:"text-center py-6",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Has visto todos los creators disponibles (",s.length," total)"]})}),p&&e.jsx(w,{creator:p,isOpen:!!p,onClose:()=>f(null)})]})},k=({viewType:s,onViewChange:a})=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a("grid"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("grid"===s?"bg-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:"Vista de Cards","aria-label":"Cambiar a vista de cards","aria-pressed":"grid"===s,children:"ðŸ“Š Grid"}),e.jsx("button",{onClick:()=>a("table"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("table"===s?"bg-purple-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),title:"Vista de Tabla","aria-label":"Cambiar a vista de tabla","aria-pressed":"table"===s,children:"ðŸ“‹ Tabla"})]}),S=()=>{const[s,a]=n.useState("grid"),{creators:l,loading:i,loadingMore:c,error:d,pagination:m,hasMore:x,refresh:h,loadMore:g,searchTerm:p,updateSearch:f,updateFilters:v,clearFilters:b}=((e={})=>{const[s,a]=n.useState([]),[l,i]=n.useState(!0),[c,d]=n.useState(!1),[m,x]=n.useState(null),[h,g]=n.useState(null),[u,p]=n.useState(e),[f,j]=n.useState(!0),[v,N]=n.useState(1),[y,b]=n.useState(""),[w,C]=n.useState(""),k=n.useRef(null),S=n.useRef(null);n.useEffect(()=>(k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{C(y)},500),()=>{k.current&&clearTimeout(k.current)}),[y]);const F=n.useCallback(async(e=!0,s=null)=>{try{e?(i(!0),N(1)):d(!0),x(null);const l=null!==s?s:e?1:v,n={...u,page:l,limit:t.PAGINATION_SIZE,search:w.trim()||void 0},c=Object.fromEntries(Object.entries(n).filter(([e,s])=>void 0!==s));r("Fetching creators with filters:",c);const m=await o.getCreators(c);m.success&&(a(e?m.creators:e=>[...e,...m.creators]),g(m.pagination),m.pagination?j(m.pagination.page<m.pagination.pages):j(!1),r(`Loaded ${m.creators.length} creators (page ${c.page})`))}catch(l){x(l.message),r("Error loading creators:",l.message)}finally{i(!1),d(!1)}},[u,w]);n.useEffect(()=>{S.current=F},[F]);const E=n.useCallback(async()=>{if(f&&!c)try{const e=v+1;N(e),await S.current(!1,e)}catch(e){x(e.message),r("Error loading more creators:",e.message)}},[v,f,c]);n.useEffect(()=>{F(!0)},[u,w]);const $=n.useCallback(e=>{p(s=>({...s,...e})),N(1),j(!0)},[]),R=n.useCallback(e=>{b(e),N(1),j(!0)},[]),M=n.useCallback(()=>{p({}),b(""),N(1),j(!0)},[]),_=n.useCallback(()=>{F(!0)},[F]);return{creators:s,loading:l,loadingMore:c,error:m,pagination:h,filters:u,hasMore:f,currentPage:v,searchTerm:y,debouncedSearch:w,updateFilters:$,updateSearch:R,clearFilters:M,refresh:_,fetchCreators:F,loadMore:E}})(),w=((e,s)=>{const[a,t]=n.useState([]),[r,l]=n.useState([]),[i,o]=n.useState({min:"",max:""}),[c,d]=n.useState(""),[m,x]=n.useState(""),[h,g]=n.useState(""),u=n.useMemo(()=>({interests:["moda","belleza","lifestyle","tecnologia","gaming","educacion","baile","musica","entretenimiento","deporte","fitness","nutricion","gastronomia","cocina","recetas","comedia","viral"],platforms:["instagram","tiktok","youtube","facebook","twitter","twitch"],nationalities:["chilena","extranjera"],locations:["santiago","valparaiso","concepcion","antofagasta","la-serena","temuco"],modalities:["presencial","remoto","hibrido"]}),[]);n.useEffect(()=>{const s={interests:a.length>0?a:void 0,platforms:r.length>0?r:void 0,ageMin:i.min||void 0,ageMax:i.max||void 0,nationality:c||void 0,location:m||void 0,modality:h||void 0},t=Object.fromEntries(Object.entries(s).filter(([e,s])=>void 0!==s));e(t)},[a,r,i,c,m,h,e]);const p=n.useCallback(e=>{t(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},[]),f=n.useCallback(e=>{l(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},[]),j=n.useCallback(()=>{t([]),l([]),o({min:"",max:""}),d(""),x(""),g(""),s&&s()},[s]),v=n.useMemo(()=>a.length>0||r.length>0||i.min||i.max||c||m||h,[a,r,i,c,m,h]);return{selectedInterests:a,selectedPlatforms:r,ageRange:i,selectedNationality:c,selectedLocation:m,selectedModality:h,setSelectedInterests:t,setSelectedPlatforms:l,setAgeRange:o,setSelectedNationality:d,setSelectedLocation:x,setSelectedModality:g,handleInterestToggle:p,handlePlatformToggle:f,clearFilters:j,filterOptions:u,hasActiveFilters:v}})(v,b),S=(e,s)=>{},F=()=>{f("")};return e.jsx("div",{className:"flex-1 bg-gray-50 overflow-auto",children:e.jsxs("div",{className:"p-8 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Creators"}),e.jsx("p",{className:"text-gray-600",children:"Gestiona y filtra tu base de creators registrados"})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsx(u,{searchTerm:p,onSearchChange:f,placeholder:"Buscar por nombre o email en toda la base de datos..."})}),e.jsx(k,{viewType:s,onViewChange:a})]}),e.jsx(j,{filters:{...w,totalCreators:l.length,filteredCount:l.length}}),(p||w.hasActiveFilters)&&e.jsx("div",{className:"mb-4 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[p&&e.jsxs("span",{className:"text-purple-700 font-medium",children:['ðŸ” Buscando: "',p,'"']}),w.hasActiveFilters&&e.jsxs("span",{className:"text-purple-700 font-medium",children:[p?"|":"ðŸŽ¯"," Filtros aplicados"]}),e.jsx("span",{className:"text-purple-600 text-sm",children:i?"Buscando...":(null==m?void 0:m.total)?`${m.total} resultado(s) total, mostrando ${l.length}`:`${l.length} resultado(s)`})]}),e.jsx("button",{onClick:()=>{F(),w.clearFilters()},className:"text-purple-600 hover:text-purple-800 text-sm font-medium transition-colors",children:"Limpiar todo âœ•"})]})}),0!==l.length||i?"grid"===s?e.jsx(y,{creators:l,loading:i,loadingMore:c,error:d,hasMore:x,onRefresh:h,onLoadMore:g,onFavoriteChange:S}):e.jsx(C,{creators:l,loading:i,loadingMore:c,error:d,hasMore:x,onRefresh:h,onLoadMore:g,onFavoriteChange:S}):e.jsx(N,{hasFilters:!!p||w.hasActiveFilters,onClearFilters:()=>{F(),w.clearFilters()}})]})})},F={SearchBar:u,CreatorFilters:j,CreatorCard:v,EmptyState:N,CreatorsList:y,CreatorsPage:S};export{v as CreatorCard,j as CreatorFilters,y as CreatorsList,S as CreatorsPage,N as EmptyState,u as SearchBar,F as creatorsComponents,F as default};
